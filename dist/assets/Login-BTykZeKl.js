import{r as e,j as a,e as r,o as s,E as t,p as l,q as o}from"./trip-components-CFAaFKI4.js";import{a as n}from"./index-Bo-Ow9Nt.js";import{s as i,G as d,j as c,k as m}from"./firebase-C2GiP1il.js";import{u,L as x}from"./router-CDJVE5pb.js";import"./react-vendor-BQK9_sJn.js";const b=()=>{const c=u(),[b,g]=e.useState({email:"",password:""}),[h,p]=e.useState(!1),[y,f]=e.useState({}),[w,k]=e.useState(!1),[j,v]=e.useState(""),[N,P]=e.useState(navigator.onLine);e.useEffect((()=>{const e=()=>P(!0),a=()=>P(!1);return window.addEventListener("online",e),window.addEventListener("offline",a),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",a)}}),[]);const S=e=>{const{name:a,value:r}=e.target;g((e=>({...e,[a]:r}))),y[a]&&f((e=>({...e,[a]:""}))),v("")};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Sign in to your account to continue"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-100 dark:border-gray-700",children:[j&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:j})}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault();const a=(()=>{const e={};return b.email?/\S+@\S+\.\S+/.test(b.email)||(e.email="Email is invalid"):e.email="Email is required",b.password?b.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",e})();if(Object.keys(a).length>0)f(a);else if(N){k(!0);try{await i(n,b.email,b.password),c("/",{state:{message:"Login successful!"}})}catch(r){switch(r.code){case"auth/user-not-found":v("No account found with this email.");break;case"auth/wrong-password":v("Incorrect password. Please try again.");break;case"auth/invalid-email":v("Invalid email address.");break;case"auth/network-request-failed":v("Network error. Please check your connection.");break;case"auth/too-many-requests":v("Too many attempts. Please try again later.");break;default:v(r.message||"Login failed. Please try again.")}}finally{k(!1)}}else v("You are offline. Please check your connection.")},className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"email",name:"email",value:b.email,onChange:S,className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white "+(y.email?"border-red-500":"border-gray-300"),placeholder:"Enter your email"})]}),y.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:h?"text":"password",name:"password",value:b.password,onChange:S,className:"w-full pl-10 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white "+(y.password?"border-red-500":"border-gray-300"),placeholder:"Enter your password"}),a.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:h?a.jsx(t,{className:"w-5 h-5"}):a.jsx(l,{className:"w-5 h-5"})})]}),y.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.password})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-300",children:"Remember me"})]}),a.jsx(x,{to:"/forgot",className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Forgot password?"})]}),a.jsx("button",{type:"submit",disabled:w||!N,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:w?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Signing In..."]}):"Sign In"})]}),a.jsx("div",{className:"my-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Or continue with"})})]})}),a.jsx("div",{className:"space-y-3",children:a.jsxs("button",{onClick:()=>(async e=>{if(N){k(!0);try{let a;"google"===e&&(a=new d,a.setCustomParameters({prompt:"select_account"})),await m(n,a),c("/",{state:{message:`${e} login successful!`}})}catch(a){switch(a.code){case"auth/popup-blocked":v("Popup was blocked. Please allow popups and try again.");break;case"auth/popup-closed-by-user":v("Login was cancelled. Please try again.");break;case"auth/account-exists-with-different-credential":v("An account already exists with this email but different credentials. Try another sign-in method or link accounts.");break;case"auth/network-request-failed":v("Network error. Please check your connection.");break;case"auth/invalid-credential":v("Invalid credentials. Please check your provider settings.");break;case"auth/too-many-requests":v("Too many attempts. Please try again later.");break;default:v(a.message||`${e} login failed. Please try again.`)}}finally{k(!1)}}else v("You are offline. Please check your connection.")})("google"),disabled:w||!N,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(o,{className:"w-5 h-5 text-red-500 mr-3"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Continue with Google"})]})}),a.jsxs("p",{className:"mt-8 text-center text-sm text-gray-600 dark:text-gray-300",children:["Don't have an account?"," ",a.jsx(x,{to:"/signup",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:"Sign up here"})]})]})]})})};export{b as default};
