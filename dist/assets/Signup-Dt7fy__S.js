import{r as e,j as a,U as r,e as s,P as t,o as l,E as o,p as d,q as n}from"./trip-components-CFAaFKI4.js";import{a as i,d as c}from"./index-Bo-Ow9Nt.js";import{l as m,u,m as p,n as x,G as h,j as g,k as y}from"./firebase-C2GiP1il.js";import{u as b,L as f}from"./router-CDJVE5pb.js";import"./react-vendor-BQK9_sJn.js";const w=()=>{const g=b(),[w,N]=e.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[k,j]=e.useState(!1),[v,P]=e.useState(!1),[S,C]=e.useState({}),[A,q]=e.useState(!1),[E,L]=e.useState(!1),[D,I]=e.useState(""),[T,Y]=e.useState(navigator.onLine);e.useEffect((()=>{const e=()=>Y(!0),a=()=>Y(!1);return window.addEventListener("online",e),window.addEventListener("offline",a),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",a)}}),[]);const $=e=>{const{name:a,value:r}=e.target;N((e=>({...e,[a]:r}))),S[a]&&C((e=>({...e,[a]:""}))),I("")};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-lg",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Create Account"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Join us and start your journey today"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-100 dark:border-gray-700",children:[D&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:D})}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault();const a=(()=>{const e={};return w.firstName.trim()||(e.firstName="First name is required"),w.lastName.trim()||(e.lastName="Last name is required"),w.email?/\S+@\S+\.\S+/.test(w.email)||(e.email="Email is invalid"):e.email="Email is required",w.phone?/^\+?[\d\s-()]+$/.test(w.phone)||(e.phone="Phone number is invalid"):e.phone="Phone number is required",w.password?w.password.length<8?e.password="Password must be at least 8 characters":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(w.password)||(e.password="Password must contain uppercase, lowercase, and number"):e.password="Password is required",w.confirmPassword?w.password!==w.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",E||(e.terms="You must agree to the terms and conditions"),e})();if(Object.keys(a).length>0)C(a);else if(T){q(!0);try{const{user:e}=await m(i,w.email,w.password);await u(e,{displayName:`${w.firstName} ${w.lastName}`});const a={firstName:w.firstName,lastName:w.lastName,email:w.email,phone:w.phone,createdAt:new Date,updatedAt:new Date,signupMethod:"email"};try{await p(x(c,"users",e.uid),a)}catch(r){"unavailable"===r.code?I("You are offline. User data will sync when you reconnect."):"permission-denied"===r.code?I("Profile created, but permissions error occurred. Please contact support."):I("Profile created, but some data may not be saved. Please update your profile later.")}g("/home",{state:{message:"Account created successfully! Welcome!"}})}catch(s){switch(s.code){case"auth/email-already-in-use":I("This email is already registered. Please use another.");break;case"auth/invalid-email":I("Invalid email address.");break;case"auth/weak-password":I("Password is too weak.");break;case"auth/invalid-api-key":I("Invalid API key. Please check your Firebase configuration.");break;case"auth/network-request-failed":I("Network error. Please check your connection.");break;case"auth/too-many-requests":I("Too many attempts. Please try again later.");break;default:I(s.message||"Signup failed. Please try again.")}}finally{q(!1)}}else I("You are offline. Please check your connection.")},className:"space-y-5",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",name:"firstName",value:w.firstName,onChange:$,className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white "+(S.firstName?"border-red-500":"border-gray-300"),placeholder:"First name"})]}),S.firstName&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:S.firstName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",name:"lastName",value:w.lastName,onChange:$,className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white "+(S.lastName?"border-red-500":"border-gray-300"),placeholder:"Last name"})]}),S.lastName&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:S.lastName})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"email",name:"email",value:w.email,onChange:$,className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white "+(S.email?"border-red-500":"border-gray-300"),placeholder:"Enter your email"})]}),S.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:S.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"tel",name:"phone",value:w.phone,onChange:$,className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white "+(S.phone?"border-red-500":"border-gray-300"),placeholder:"Enter your phone number"})]}),S.phone&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:S.phone})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:k?"text":"password",name:"password",value:w.password,onChange:$,className:"w-full pl-10 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white "+(S.password?"border-red-500":"border-gray-300"),placeholder:"Password"}),a.jsx("button",{type:"button",onClick:()=>j(!k),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:k?a.jsx(o,{className:"w-5 h-5"}):a.jsx(d,{className:"w-5 h-5"})})]}),S.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:S.password})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:v?"text":"password",name:"confirmPassword",value:w.confirmPassword,onChange:$,className:"w-full pl-10 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white "+(S.confirmPassword?"border-red-500":"border-gray-300"),placeholder:"Confirm password"}),a.jsx("button",{type:"button",onClick:()=>P(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:v?a.jsx(o,{className:"w-5 h-5"}):a.jsx(d,{className:"w-5 h-5"})})]}),S.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:S.confirmPassword})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",checked:E,onChange:e=>L(e.target.checked),className:"mt-1 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),a.jsxs("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-300",children:["I agree to the"," ",a.jsx(f,{to:"/terms",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400",children:"Terms of Service"})," ","and"," ",a.jsx(f,{to:"/privacy",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400",children:"Privacy Policy"})]})]}),S.terms&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:S.terms})]}),a.jsx("button",{type:"submit",disabled:A||!T,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-purple-700 hover:to-blue-700 focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:A?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Account..."]}):"Create Account"})]}),a.jsx("div",{className:"my-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Or sign up with"})})]})}),a.jsx("div",{className:"space-y-3",children:a.jsxs("button",{onClick:()=>(async e=>{var a,r;if(T){q(!0);try{let t;"google"===e&&(t=new h,t.setCustomParameters({prompt:"select_account"}));const l=(await y(i,t)).user,o={firstName:(null==(a=l.displayName)?void 0:a.split(" ")[0])||"",lastName:(null==(r=l.displayName)?void 0:r.split(" ").slice(1).join(" "))||"",email:l.email||"",phone:"",createdAt:new Date,updatedAt:new Date,signupMethod:e};try{await p(x(c,"users",l.uid),o)}catch(s){"unavailable"===s.code?I("You are offline. User data will sync when you reconnect."):"permission-denied"===s.code?I("Signed up successfully, but permissions error occurred. Please contact support."):I("Signed up successfully, but some data may not be saved. Please update your profile.")}g("/home",{state:{message:`${e} signup successful!`}})}catch(t){switch(t.code){case"auth/popup-closed-by-user":I("Sign-up was cancelled. Please try again.");break;case"auth/popup-blocked":I("Popup was blocked. Please allow popups and try again.");break;case"auth/account-exists-with-different-credential":I("An account already exists with this email but different credentials. Try signing in or linking accounts.");break;case"auth/network-request-failed":I("Network error. Please check your connection.");break;case"auth/invalid-credential":I("Invalid credentials. Please check your provider settings.");break;case"auth/too-many-requests":I("Too many attempts. Please try again later.");break;case"auth/cancelled-popup-request":I("Popup request was cancelled. Please try again.");break;default:I(t.message||`${e} signup failed. Please try again.`)}}finally{q(!1)}}else I("You are offline. Please check your connection.")})("google"),disabled:A||!T,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(n,{className:"w-5 h-5 text-red-500 mr-3"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:"Sign up with Google"})]})}),a.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-300",children:["Already have an account?"," ",a.jsx(f,{to:"/login",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 font-semibold",children:"Sign in here"})]})]})]})})};export{w as default};
